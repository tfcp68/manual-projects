Кузнечик может прыгать от 1 до k столбика вперёд. На каждом столбике выросли ядовитые плющи. Урон наносят они разный. Необходимо допрыгать до n-го столбика, получив минимально возможный урон.

Решение задачи через ДП назад:

Необходимо искать минимум урона, который получит кузнечик, допрыгнув до текущего столбика.

1. Подзадачей является  поиск оптимального пути с минимальным количеством урона до i-й ячейки

2. Рекуррентная формула: $W_i = min(W_i, W_{i - j} + d_i)$

3. Стартовые значения находятся в исходном массиве

4. Массив заполняется сначала. Во избежание выхода за границы, идёт обращение назад только на существующие ячейки

<div style="display:flex; align-items: center;">
    <div style="flex:1; mix-blend-mode:difference; filter:invert(1);">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 652.3600372314452 435.8799629211426" width="550" height="350">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="652.3600372314452" height="435.8799629211426" fill="none"></rect><g stroke-linecap="round" transform="translate(279.4505360115975 292.8101318197869) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(364.7347029022096 292.8101318197869) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(449.97805171977734 292.37773897772604) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(193.73831258085852 292.41117459742145) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(108.19535462823262 292.88783967247673) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(22.340711771492806 292.9708312536295) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(535.0203526146624 292.4225428867385) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(384.50293644491785 389.3549687207733) rotate(0 27.2119140625 11.5)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">W(i-1)</text></g><g transform="translate(299.2404145759508 389.78354014934484) rotate(0 27.2119140625 11.5)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">W(i-2)</text></g><g transform="translate(36.572447711206564 385.1619383229099) rotate(0 26.650390625 11.5)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">W(i-k)</text></g><g stroke-linecap="round"><g transform="translate(580.4349777680532 291.261469032087) rotate(0 -91.06582998583553 -132.9359130058183)"><path d="M0 0 C-2.66 -39.48, 14.82 -192.73, -15.97 -236.9 C-46.75 -281.06, -156.58 -260.28, -184.7 -264.96 M0 0 C-2.66 -39.48, 14.82 -192.73, -15.97 -236.9 C-46.75 -281.06, -156.58 -260.28, -184.7 -264.96" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(580.4349777680532 291.261469032087) rotate(0 -91.06582998583553 -132.9359130058183)"><path d="M-156.56 -275.37 C-164.53 -272.42, -172.5 -269.47, -184.7 -264.96 M-156.56 -275.37 C-163.97 -272.63, -171.37 -269.89, -184.7 -264.96" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(580.4349777680532 291.261469032087) rotate(0 -91.06582998583553 -132.9359130058183)"><path d="M-156.46 -254.85 C-164.46 -257.71, -172.46 -260.58, -184.7 -264.96 M-156.46 -254.85 C-163.89 -257.51, -171.32 -260.17, -184.7 -264.96" stroke="#000" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(59.40080411529618 280.5428092777711) rotate(0 222.30939160827955 -96.15525128596664)"><path d="M0 0 C37.18 -32.05, 148.97 -191.54, 223.08 -192.31 C297.18 -193.08, 407.7 -35.9, 444.62 -4.61 M0 0 C37.18 -32.05, 148.97 -191.54, 223.08 -192.31 C297.18 -193.08, 407.7 -35.9, 444.62 -4.61" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(59.40080411529618 280.5428092777711) rotate(0 222.30939160827955 -96.15525128596664)"><path d="M417.98 -18.41 C426.85 -13.82, 435.72 -9.22, 444.62 -4.61 M417.98 -18.41 C427.9 -13.27, 437.83 -8.13, 444.62 -4.61" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(59.40080411529618 280.5428092777711) rotate(0 222.30939160827955 -96.15525128596664)"><path d="M433.08 -32.31 C436.92 -23.09, 440.76 -13.87, 444.62 -4.61 M433.08 -32.31 C437.38 -21.99, 441.68 -11.67, 444.62 -4.61" stroke="#000" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(309.4753551323631 282.00665845279036) rotate(0 88.84825956040788 -43.462693818315074)"><path d="M0 0 C14.87 -14.49, 59.62 -86.93, 89.23 -86.93 C118.85 -86.93, 162.95 -14.49, 177.7 0 M0 0 C14.87 -14.49, 59.62 -86.93, 89.23 -86.93 C118.85 -86.93, 162.95 -14.49, 177.7 0" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(309.4753551323631 282.00665845279036) rotate(0 88.84825956040788 -43.462693818315074)"><path d="M152.12 -15.68 C161.41 -9.98, 170.7 -4.29, 177.7 0 M152.12 -15.68 C158.51 -11.76, 164.9 -7.84, 177.7 0" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(309.4753551323631 282.00665845279036) rotate(0 88.84825956040788 -43.462693818315074)"><path d="M168.18 -28.45 C171.64 -18.12, 175.09 -7.79, 177.7 0 M168.18 -28.45 C170.56 -21.34, 172.94 -14.24, 177.7 0" stroke="#000" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(381.3802541669886 287.02958451793165) rotate(0 45.40034434804079 -26.939323698460612)"><path d="M0 0 C7.31 -8.98, 28.73 -53.23, 43.87 -53.87 C59 -54.51, 82.98 -12.2, 90.8 -3.86 M0 0 C7.31 -8.98, 28.73 -53.23, 43.87 -53.87 C59 -54.51, 82.98 -12.2, 90.8 -3.86" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(381.3802541669886 287.02958451793165) rotate(0 45.40034434804079 -26.939323698460612)"><path d="M65.84 -20.5 C73.37 -15.48, 80.9 -10.46, 90.8 -3.86 M65.84 -20.5 C75.06 -14.36, 84.28 -8.21, 90.8 -3.86" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(381.3802541669886 287.02958451793165) rotate(0 45.40034434804079 -26.939323698460612)"><path d="M82.38 -32.65 C84.92 -23.97, 87.46 -15.28, 90.8 -3.86 M82.38 -32.65 C85.49 -22.02, 88.6 -11.38, 90.8 -3.86" stroke="#000" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(10 10) rotate(0 316.1800186157226 207.9399814605713)"><path d="M32 0 M32 0 C212.62 0, 393.25 0, 600.36 0 M32 0 C189.74 0, 347.47 0, 600.36 0 M600.36 0 C621.69 0, 632.36 10.67, 632.36 32 M600.36 0 C621.69 0, 632.36 10.67, 632.36 32 M632.36 32 C632.36 149.67, 632.36 267.33, 632.36 383.88 M632.36 32 C632.36 102.5, 632.36 173, 632.36 383.88 M632.36 383.88 C632.36 405.21, 621.69 415.88, 600.36 415.88 M632.36 383.88 C632.36 405.21, 621.69 415.88, 600.36 415.88 M600.36 415.88 C378.01 415.88, 155.67 415.88, 32 415.88 M600.36 415.88 C380.51 415.88, 160.65 415.88, 32 415.88 M32 415.88 C10.67 415.88, 0 405.21, 0 383.88 M32 415.88 C10.67 415.88, 0 405.21, 0 383.88 M0 383.88 C0 255.08, 0 126.28, 0 32 M0 383.88 C0 245.98, 0 108.08, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="none" stroke-width="4" fill="none"></path></g><g transform="translate(48.36916409054322 342.5684235031531) rotate(0 14.7724609375 16.09999999999991)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="28px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">i-k</text></g><g transform="translate(307.9299728393555 341.6900482177725) rotate(0 15.55859375 16.09999999999991)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="28px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">i-2</text></g><g transform="translate(393.8353365923906 341.1900177001944) rotate(0 15.55859375 16.09999999999991)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="28px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">i-1</text></g><g transform="translate(473.32871592753645 337.50761722873904) rotate(0 20.220703125 16.09999999999991)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="28px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">d(i)</text></g></svg>
</div></div>

```
Псевдокод:

//k - длина максимального прыжка
//n - столбик, до которого необходимо дойти
//W - массив с оптимальным уроном
//damage - массив с уроном, который получает кузнечик на самом столбике

функция минимальный_урон(damage, n, k, лягушки)
	для i от 1 до n
		r <- минимум из k и i
		W[i] <- W[i - 1] + damage[i]
		для j от 2 до r
			если в  W[i - j] лягушка
				W[i - j] <- бесконечность
			W[i] <- минимум из W[i] и W[i - j] + d[i]
	вернуть W[n]
```
```python
#python

def optimal_damage_back(damage, n, k, frogs):
    if n in frogs:
        return inf
    W = [0] + [inf] * n
    for i in range(0, n + 1):
        if i in frogs:
            W[i] = inf
        r = min(k, i)
        for j in range(1, r + 1):
            if i - j in frogs:
                W[i - j] = inf
            count = damage[i - 1] + W[i - j]
            W[i] = min(W[i], count)
    return W[n]
```
```cpp
//C++
//sport version
  
int optimal_damage_back(int n, int k, int f[], int d[]){
    int a[n + 1];
    for (int i = 0; i < n + 1; i++){
        a[i] = std::numeric_limits<int>::max();
    }
    a[0] = 0;
    for (size_t q = 0; q <= sizeof( f ) / sizeof( *f ); q++){
        if (f[q] == n){
            return -1;
        }
    }
    for (int i = 1; i < n + 1; i++){
        int r;
        if (k <= i){
            r = k;
        }
        if (k > i){
            r = i;
        }
        for (int j = 1; j < r + 1; j++){
            for (size_t q = 0; q <= sizeof( f ) / sizeof( *f ); q++){
                if (f[q] == i - j){
                    a[i - j] = std::numeric_limits<int>::max();
                }
            }
            int count;
            count = a[i - j] + d[i - 1];
            if (count < a[i] && count > 0){
                a[i] = count;
            }
        }
    }
    if (a[n] == std::numeric_limits<int>::max()){
        return -1;
    }
    return a[n];
}
  
```
```cpp
//C++
//product version

template<typename ValueType>
ValueType optimal_damage_back(ValueType n, ValueType k, ValueType frogs[], ValueType damage[]){
    ValueType arr[n + 1];
    for (int i = 0; i < n + 1; i++){
        arr[i] = std::numeric_limits<ValueType>::max();
    }
    arr[0] = 0;
    for (size_t q = 0; q <= sizeof( frogs ) / sizeof( *frogs ); q++){
        if (frogs[q] == n){
            return -1;
        }
    }
    for (int i = 1; i < n + 1; i++){
        int r;
        if (k <= i){
            r = k;
        }
        if (k > i){
            r = i;
        }
        for (int j = 1; j < r + 1; j++){
            for (size_t q = 0; q <= sizeof( frogs ) / sizeof( *frogs ); q++){
                if (frogs[q] == i - j){
                    arr[i - j] = std::numeric_limits<ValueType>::max();
                }
            }
            ValueType count;
            count = arr[i - j] + damage[i - 1];
            if (count < arr[i] && count > 0){
                arr[i] = count;
            }
        }
    }
    if (arr[n] == std::numeric_limits<ValueType>::max()){
        return -1;
    }
    return arr[n];
}
```

Решение через ДП вперёд:

<div style="display:flex; align-items: center;">
    <div style="flex:1; mix-blend-mode:difference; filter:invert(1);">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613.2505441436913 284.34060477703315" width="525" height="225">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="613.2505441436913" height="284.34060477703315" fill="none"></rect><g stroke-linecap="round" transform="translate(10 163.34264665630508) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(94.66668379934231 163.34264665630417) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(179.845260790471 161.12070322802538) rotate(0 41 37)"><path d="M82 37 C82 38.93, 81.83 40.88, 81.5 42.79 C81.16 44.69, 80.65 46.6, 79.99 48.43 C79.33 50.27, 78.5 52.08, 77.53 53.8 C76.56 55.52, 75.43 57.19, 74.17 58.75 C72.91 60.31, 71.5 61.8, 69.99 63.16 C68.48 64.53, 66.83 65.8, 65.1 66.93 C63.37 68.07, 61.52 69.09, 59.61 69.97 C57.71 70.84, 55.7 71.59, 53.67 72.19 C51.64 72.79, 49.53 73.24, 47.41 73.54 C45.3 73.85, 43.14 74, 41 74 C38.86 74, 36.7 73.85, 34.59 73.54 C32.47 73.24, 30.36 72.79, 28.33 72.19 C26.3 71.59, 24.29 70.84, 22.39 69.97 C20.48 69.09, 18.63 68.07, 16.9 66.93 C15.17 65.8, 13.52 64.53, 12.01 63.16 C10.5 61.8, 9.09 60.31, 7.83 58.75 C6.57 57.19, 5.44 55.52, 4.47 53.8 C3.5 52.08, 2.67 50.27, 2.01 48.43 C1.35 46.6, 0.84 44.69, 0.5 42.79 C0.17 40.88, 0 38.93, 0 37 C0 35.07, 0.17 33.12, 0.5 31.21 C0.84 29.31, 1.35 27.4, 2.01 25.57 C2.67 23.73, 3.5 21.92, 4.47 20.2 C5.44 18.48, 6.57 16.81, 7.83 15.25 C9.09 13.69, 10.5 12.2, 12.01 10.84 C13.52 9.47, 15.17 8.2, 16.9 7.07 C18.63 5.93, 20.48 4.91, 22.39 4.03 C24.29 3.16, 26.3 2.41, 28.33 1.81 C30.36 1.21, 32.47 0.76, 34.59 0.46 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.46 C49.53 0.76, 51.64 1.21, 53.67 1.81 C55.7 2.41, 57.71 3.16, 59.61 4.03 C61.52 4.91, 63.37 5.93, 65.1 7.07 C66.83 8.2, 68.48 9.47, 69.99 10.84 C71.5 12.2, 72.91 13.69, 74.17 15.25 C75.43 16.81, 76.56 18.48, 77.53 20.2 C78.5 21.92, 79.33 23.73, 79.99 25.57 C80.65 27.4, 81.16 29.31, 81.5 31.21 C81.83 33.12, 81.92 36.04, 82 37 C82.08 37.96, 82.08 36.04, 82 37" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(435.87590544158195 163.80482547933752) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(265.09120359686017 163.5368957451119) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(350.6605944367974 163.75759289200232) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(521.2505441436913 163.8040220416051) rotate(0 41 35.5)"><path d="M82 35.5 C82 37.35, 81.83 39.23, 81.5 41.05 C81.16 42.88, 80.65 44.71, 79.99 46.47 C79.33 48.23, 78.5 49.97, 77.53 51.62 C76.56 53.27, 75.43 54.87, 74.17 56.37 C72.91 57.86, 71.5 59.29, 69.99 60.6 C68.48 61.91, 66.83 63.13, 65.1 64.22 C63.37 65.31, 61.52 66.29, 59.61 67.13 C57.71 67.97, 55.7 68.69, 53.67 69.26 C51.64 69.83, 49.53 70.27, 47.41 70.56 C45.3 70.85, 43.14 71, 41 71 C38.86 71, 36.7 70.85, 34.59 70.56 C32.47 70.27, 30.36 69.83, 28.33 69.26 C26.3 68.69, 24.29 67.97, 22.39 67.13 C20.48 66.29, 18.63 65.31, 16.9 64.22 C15.17 63.13, 13.52 61.91, 12.01 60.6 C10.5 59.29, 9.09 57.86, 7.83 56.37 C6.57 54.87, 5.44 53.27, 4.47 51.62 C3.5 49.97, 2.67 48.23, 2.01 46.47 C1.35 44.71, 0.84 42.88, 0.5 41.05 C0.17 39.23, 0 37.35, 0 35.5 C0 33.65, 0.17 31.77, 0.5 29.95 C0.84 28.12, 1.35 26.29, 2.01 24.53 C2.67 22.77, 3.5 21.03, 4.47 19.38 C5.44 17.73, 6.57 16.13, 7.83 14.63 C9.09 13.14, 10.5 11.71, 12.01 10.4 C13.52 9.09, 15.17 7.87, 16.9 6.78 C18.63 5.69, 20.48 4.71, 22.39 3.87 C24.29 3.03, 26.3 2.31, 28.33 1.74 C30.36 1.17, 32.47 0.73, 34.59 0.44 C36.7 0.15, 38.86 0, 41 0 C43.14 0, 45.3 0.15, 47.41 0.44 C49.53 0.73, 51.64 1.17, 53.67 1.74 C55.7 2.31, 57.71 3.03, 59.61 3.87 C61.52 4.71, 63.37 5.69, 65.1 6.78 C66.83 7.87, 68.48 9.09, 69.99 10.4 C71.5 11.71, 72.91 13.14, 74.17 14.63 C75.43 16.13, 76.56 17.73, 77.53 19.38 C78.5 21.03, 79.33 22.77, 79.99 24.53 C80.65 26.29, 81.16 28.12, 81.5 29.95 C81.83 31.77, 81.92 34.57, 82 35.5 C82.08 36.43, 82.08 34.57, 82 35.5" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(118.68217299897526 252.31990589977795) rotate(0 12.8828125 9.199999999999818)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">w(i)</text></g><g transform="translate(183.41129748182732 253.92077489894928) rotate(0 38.23046875 9.199999999999818)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">w(i)+d(i+1)</text></g><g transform="translate(274.5892937420083 255.9406047770335) rotate(0 38.23046875 9.199999999999818)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">w(i)+d(i+2)</text></g><g stroke-linecap="round"><g transform="translate(137.76356612881887 153.15351167771405) rotate(0 209.1299301019033 -71.57675583885612)"><path d="M0 0 C34.39 -23.86, 136.62 -142.36, 206.33 -143.15 C276.04 -143.94, 382.94 -27.83, 418.26 -4.76 M0 0 C34.39 -23.86, 136.62 -142.36, 206.33 -143.15 C276.04 -143.94, 382.94 -27.83, 418.26 -4.76" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(137.76356612881887 153.15351167771405) rotate(0 209.1299301019033 -71.57675583885612)"><path d="M390.04 -14.95 C401.26 -10.9, 412.49 -6.85, 418.26 -4.76 M390.04 -14.95 C396.11 -12.76, 402.18 -10.57, 418.26 -4.76" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(137.76356612881887 153.15351167771405) rotate(0 209.1299301019033 -71.57675583885612)"><path d="M403.19 -30.7 C409.18 -20.39, 415.18 -10.07, 418.26 -4.76 M403.19 -30.7 C406.43 -25.12, 409.67 -19.54, 418.26 -4.76" stroke="#000" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(148.87983505376826 156.91484167829367) rotate(0 39.89311957104309 -15.821595326554416)"><path d="M0 0 C7.06 -5.27, 29.09 -30.84, 42.39 -31.62 C55.68 -32.41, 73.55 -9.18, 79.79 -4.69 M0 0 C7.06 -5.27, 29.09 -30.84, 42.39 -31.62 C55.68 -32.41, 73.55 -9.18, 79.79 -4.69" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(148.87983505376826 156.91484167829367) rotate(0 39.89311957104309 -15.821595326554416)"><path d="M58.69 -13.95 C64.18 -11.54, 69.67 -9.13, 79.79 -4.69 M58.69 -13.95 C64.94 -11.21, 71.19 -8.46, 79.79 -4.69" stroke="#000" stroke-width="4" fill="none"></path></g><g transform="translate(148.87983505376826 156.91484167829367) rotate(0 39.89311957104309 -15.821595326554416)"><path d="M69.58 -25.35 C72.23 -19.97, 74.89 -14.6, 79.79 -4.69 M69.58 -25.35 C72.6 -19.23, 75.63 -13.11, 79.79 -4.69" stroke="#000" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(132.05575313746556 212.98753618048977) rotate(0 3.1103515625 16.09999999999991)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="28px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">i</text></g><g transform="translate(196.59268578519402 207.9888660764891) rotate(0 25.8447265625 11.5)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">d(i+1)</text></g><g transform="translate(284.01901248743695 209.26514865278114) rotate(0 25.8447265625 11.5)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">d(i+2)</text></g><g transform="translate(543.9733269048069 213.1229187494091) rotate(0 18.286132812499943 16.09999999999991)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="28px" fill="#000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">i+k</text></g></svg>
</div></div>

1. Создаётся отдельный массив W с оптимальным уроном в i-й ячейке. 

2. Формула для формирование последующих значений: $W_{i+j} = min(W_{i+j}, W_{i} + d_{i + j - 1})$

Если на столбике сидит лягушка, то урон равен бесконечности:

```
Псевдокод:

//k - длина максимального прыжка
//n - столбик, до которого необходимо дойти
//W - массив с оптимальным уроном
//damage - массив с уроном, который получает кузнечик на самом столбике

функция минимальный урон(damage, n, k, лягушки)
	для i от 0 до n
		 для j от 1 до k
			 count <- W[i] + damage[i + j]
			 W[i + j] <- минимум из W[i + j] и count
			 если в i + j лягушка, то
				 W[i + j] <- бесконечность
	return W[n]
```
```python
#python

from math import inf  

def optimal_damage_forward(damage, n, k, frogs):
    if n in frogs:
        return inf
    W = [0] + [inf] * n
    for i in range(0, n):
        if i in frogs:
            W[i] = inf
        r = min(k, n - i)
        for j in range(1, r + 1):
            count = W[i] + damage[i + j - 1]
            W[i+j] = min(count, W[i + j])
    return W[n]
```
```cpp
//C++
//sport version

int optimal_damage_forward(int n, int k, int f[], int d[]) {
    int a[n + 1];
    for (int i = 0; i < n + 1; i++) {
        a[i] = std::numeric_limits<int>::max();
    }
    a[0] = 0;
    for (size_t q = 0; q <= sizeof(f) / sizeof(*f); q++) {
        if (f[q] == n) {
            return -1;
        }
    }
    for (int i = 0; i < n; i++) {
        for (size_t q = 0; q <= sizeof(f) / sizeof(*f); q++) {
            if (f[q] == i) {
                a[i] = std::numeric_limits<int>::max();
            }
        }
        int r;
        if (k <= (n - i)) {
            r = k;
        }
        if (k > (n - i)) {
            r = n - i;
        }
        for (int j = 1; j < r + 1; j++) {
            int count;
            count = a[i] + d[i + j - 1];
            if (count < a[i + j] && count > 0) {
                a[i + j] = count;
            }
        }
    }
    if (a[n] == std::numeric_limits<int>::max()) {
        return -1;
    }
    return a[n];
}
```
```cpp
//C++
//product version

template<typename ValueType>
ValueType optimal_damage_forward(ValueType n, ValueType k, ValueType frogs[], ValueType damage[]) {
    ValueType arr[n + 1];
    for (int i = 0; i < n + 1; i++) {
        arr[i] = std::numeric_limits<ValueType>::max();
    }
    arr[0] = 0;
    for (size_t q = 0; q <= sizeof(frogs) / sizeof(*frogs); q++) {
        if (frogs[q] == n) {
            return -1;
        }
    }
    for (int i = 0; i < n; i++) {
        for (size_t q = 0; q <= sizeof(frogs) / sizeof(*frogs); q++) {
            if (frogs[q] == i) {
                arr[i] = std::numeric_limits<ValueType>::max();
            }
        }
        int r;
        if (k <= (n - i)) {
            r = k;
        }
        if (k > (n - i)) {
            r = n - i;
        }
        for (int j = 1; j < r + 1; j++) {
            ValueType count;
            count = arr[i] + damage[i + j - 1];
            if (count < arr[i + j] && count > 0) {
                arr[i + j] = count;
            }
        }
    }
    if (arr[n] == std::numeric_limits<ValueType>::max()) {
        return -1;
    }
    return arr[n];
}
```

Вывод оптимального пути, по которому прошёл кузнечик можно сделать или через стек, или через разворачивание пути. Пример реализации второго варианта:

```
Псевдокод:

//k - длина максимального прыжка
//n - столбик, до которого необходимо дойти
//W - массив с оптимальным уроном
//d - массив с уроном, который получает кузнечик на самом столбике

функция вывод пути(W, d, n, k)
	r = минимум из k и n
	для j от 2 до r
		если W[n] = W[n - j] + d[n], то
			если n = 0, то
				вернуть 0
			иначе
				вывод_пути(W, d, (n - j), k)
				вернуть n
```
```python
#python

def output_way(W, damage, n, k):
    a = []
    r = min(k, n)
    for i in range(2, r + 1):
        if W[n] == W[n - i]+damage[n]:
            if n == 0:
                a.append(0)
                return a
            else:
                output_way(W, damage, n - i, k)
                a.append(n)
                return a           
```
```cpp
//C++
//sport version

int output_way(int *W, int *d, int n, int k){
    if (n == 0){
        cout << 0;
    }
    int r;
    if (k > n){
        r = n;
    }
    if (k <= n){
        r = k;
    }
    for (int i = 1; i < r+1; i++){
        if (W[n] == W[n - i] + d[n - 1]){
            if (n != 0){
                output_way(W, d, n - i, k);
                cout << " " << n;
            }
        }
    }
}
```
```cpp
//C++
//product version

template<typename ValueType>
ValueType output_way(ValueType *W, ValueType *damage, ValueType n, ValueType k){
    if (n == 0){
        cout << 0;
    }
    ValueType r;
    if (k > n){
        r = n;
    }
    if (k <= n){
        r = k;
    }
    for (int i = 1; i < r+1; i++){
        if (W[n] == W[n - i] + damage[n - 1]){
            if (n != 0){
                output_way(W, damage, n - i, k);
                cout << " " << n;
            }
        }
    }
}
```
